<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
	"-//Hibernate/Hibernate Mapping DTD//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping package="com.citedessciences.bdd.beans">
	<class
		name="HFicheExploitation"
		table="FICHE_EXPLOITATION"
	>
		<id
			name="Id"
			type="integer"
			column="NUMSEQFICEXP"
		>
			<generator class="sequence">
	    		<param name="sequence">FICHE_SEQ</param>
    		</generator>
		</id>
		<property
			name="Reference"
			column="REFERENCE"
			type="string"
			not-null="false"
			length="50"
		/>
		<property
			name="Titre"
			column="TITRE"
			type="string"
			not-null="false"
			length="50"
		/>
		<property
			name="TitreCourt"
			column="TITRE_COURT"
			type="string"
			not-null="false"
			length="50"
		/>
		<property
			name="Resume"
			column="RESUME"
			type="string"
			not-null="false"
			length="100"
		/>
		<property
			name="Deroulement"
			column="DEROULEMENT"
			type="string"
			not-null="false"
			length="100"
		/>
		<property
			name="Consequences"
			column="CONSEQUENCES"
			type="string"
			not-null="false"
			length="100"
		/>
		<property
			name="Observation"
			column="OBSERVATION"
			type="string"
			not-null="false"
			length="100"
		/>
		<property
			name="DateCreation"
			column="DATE_CREATION"
			type="java.util.Date"
			not-null="false"
			length="7"
		/>
		<property
			name="AlerteSuperEspace"
			column="ALERTE_SUPER_ESPACE"
			type="integer"
			not-null="false"
			length="22"
		/>
		<property
			name="TopTraitementAlerte"
			column="TOP_TRAITEMENT_ALERTE"
			type="integer"
			not-null="false"
			length="22"
		/>
		<property
			name="IdProcessInstance"
			column="ID_PROCESS_INSTANCE"
			type="integer"
			not-null="false"
			length="22"
		/>
		
		<property
			name="DateCommentaire"
			column="DATE_COMMENTAIRE"
			type="java.util.Date"
			not-null="false"
		>
		</property>	
		<property
			name="Commentaire"
			column="COMMENTAIRE"
			type="string"
			not-null="false"
		>
		</property>	
		
		<many-to-one
			name="CodeTypeOperationCom"
			column="CODE_TYPE_OPERATION_COM"
			class="HRefTypeOperationCom"
			not-null="false"
		>
		</many-to-one>
		<many-to-one
			name="Idficexpann"
			column="IDFICEXPANN"
			class="HFicheExploitationAnnule"
			not-null="false"
		>
		</many-to-one>
		<many-to-one
			name="Idficresval"
			column="IDFICRESVAL"
			class="HFicheReservationValide"
			not-null="false"
		>
		</many-to-one>
		<many-to-one
			name="Numseqfildsc"
			column="NUMSEQFILDSC"
			class="HFilDiscussion"
			not-null="false"
		>
		</many-to-one>
		<many-to-one
			name="CodeTypeOperation"
			column="CODE_TYPE_OPERATION"
			class="HRefTypeOperation"
			not-null="true"
		>
		</many-to-one>
		
		<many-to-one
			name="IdChefProjet"
			column="ID_CHEF_PROJET"
			class="HUtilisateur"
			not-null="true"
		>
		</many-to-one>
		
		<property
			name="Statut"
			column="STATUT"
			type="string"
			not-null="false"
			length="50"
		/>
	

		<set name="FicheExploitationAnnules" inverse="true">
			<key column="NUMSEQFICEXP"/>
			<one-to-many class="HFicheExploitationAnnule"/>
		</set>

		<set name="RELANCEs" inverse="true">
			<key column="NUMSEQFICEXP"/>
			<one-to-many class="HRelance"/>
		</set>

		<set name="FilDiscussions" inverse="true">
			<key column="NUMSEQFICEXP"/>
			<one-to-many class="HFilDiscussion"/>
		</set>
	
		<set
			name="ALERTEs"
			table="ALERTE_FICHE_EXPLOITATION"
			cascade="all"
		>
			<key column="NUMSEQFICEXP"/>
			<many-to-many column="NUMSEQALE" class="HAlerte"/>
		</set>

		<set name="DateEvenement" lazy="true" table="FICHEEXP_DATE" cascade="delete" >
			<key column="IDFICHE"  />
			<many-to-many column="IDDATE" class="HDateEvenement" />
		</set>
		
		<set name="CodeLocalisations" table="FICHEEXP_LOCALISATION" lazy="false">
			<key column="NUMSEQFICEXP"/>
			<many-to-many column="CODE_LOCALISATION" class="HRefLocalisation"/>
		</set>
		
		<set inverse="true" name="FicheexpBesoin" lazy="true" cascade="save-update">
			<key column="IDFICHE" />
			<one-to-many class="HFicheexpBesoin" />
		</set>
		
		<set name="DocumentJoints"	table="DOCUMENT_JOINT_FICHE_EXP" lazy="true" cascade="delete">
			<key column="NUMSEQFICEXP"/>
			<many-to-many column="NUMSEQDOC" class="HDocumentJoint"/>
		</set>
		
		<set inverse="true" name="FicheAValiderCellule" lazy="true" cascade="delete" >
			<key column="NUMSEQFICEXP" />
			<one-to-many class="HFicheAvaliderCellule" />
		</set>
		
	</class>	
</hibernate-mapping>